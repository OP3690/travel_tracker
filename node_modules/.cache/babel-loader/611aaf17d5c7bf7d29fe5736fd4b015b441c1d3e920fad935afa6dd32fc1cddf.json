{"ast":null,"code":"var _jsxFileName = \"/Users/omprakashutaha/Desktop/Map2/src/components/TravelJournal.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport API from '../api/api';\nimport Layout from './Layout';\nimport './TravelJournal.css';\nimport { FiPlus, FiEdit2, FiTrash2, FiStar, FiCheckCircle, FiFlag } from 'react-icons/fi';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction getAuthHeader() {\n  const token = localStorage.getItem('token');\n  return token ? {\n    Authorization: token\n  } : {};\n}\nconst AddEditModal = ({\n  open,\n  onClose,\n  onSave,\n  initialValue,\n  title,\n  stateName\n}) => {\n  _s();\n  const [value, setValue] = useState(initialValue || '');\n  useEffect(() => {\n    setValue(initialValue || '');\n  }, [initialValue]);\n  if (!open) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"tj-modal-backdrop\",\n    onClick: onClose,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tj-modal\",\n      onClick: e => e.stopPropagation(),\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          textAlign: 'center',\n          marginBottom: 8\n        },\n        children: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 19,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-state-name\",\n        style: {\n          textAlign: 'center',\n          fontWeight: 600,\n          marginBottom: 10,\n          fontSize: '1.1em',\n          color: '#4f8cff'\n        },\n        children: stateName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"tj-modal-input\",\n        value: value,\n        onChange: e => setValue(e.target.value),\n        autoFocus: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 21,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tj-modal-actions\",\n        style: {\n          display: 'flex',\n          justifyContent: 'center',\n          gap: 12,\n          marginTop: 10\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"tj-btn tj-btn-cancel\",\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            if (value.trim()) onSave(value.trim());\n          },\n          className: \"tj-btn tj-btn-save\",\n          children: \"Save\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 29,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 17,\n    columnNumber: 5\n  }, this);\n};\n_s(AddEditModal, \"YFG33VBfQLr+DBbD0tCJ6eBD1so=\");\n_c = AddEditModal;\nconst ConfirmModal = ({\n  open,\n  onClose,\n  onConfirm,\n  stateName,\n  destination\n}) => {\n  if (!open) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"tj-modal-backdrop\",\n    onClick: onClose,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tj-modal\",\n      onClick: e => e.stopPropagation(),\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          textAlign: 'center',\n          marginBottom: 8\n        },\n        children: \"Delete Destination\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-state-name\",\n        style: {\n          textAlign: 'center',\n          fontWeight: 600,\n          marginBottom: 10,\n          fontSize: '1.1em',\n          color: '#4f8cff'\n        },\n        children: stateName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-message\",\n        style: {\n          textAlign: 'center',\n          marginBottom: 16\n        },\n        children: [\"Are you sure you want to delete \", /*#__PURE__*/_jsxDEV(\"b\", {\n          children: destination\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 43\n        }, this), \" from \", /*#__PURE__*/_jsxDEV(\"b\", {\n          children: stateName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 69\n        }, this), \"?\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tj-modal-actions\",\n        style: {\n          display: 'flex',\n          justifyContent: 'center',\n          gap: 12\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"tj-btn tj-btn-cancel\",\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onConfirm,\n          className: \"tj-btn tj-btn-delete\",\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n};\n_c2 = ConfirmModal;\nconst TravelJournal = () => {\n  _s2();\n  const [destinations, setDestinations] = useState([]);\n  const [visited, setVisited] = useState([]); // [{state, destination}]\n  const [expanded, setExpanded] = useState({}); // { [stateId]: true/false }\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filter, setFilter] = useState('all');\n  const [modal, setModal] = useState({\n    open: false\n  });\n  const [confirm, setConfirm] = useState({\n    open: false\n  });\n  const [loading, setLoading] = useState(true);\n  const [globalAddModal, setGlobalAddModal] = useState(false);\n  const [selectedStateId, setSelectedStateId] = useState('');\n  const [newDestName, setNewDestName] = useState('');\n  const [destPlaceholder, setDestPlaceholder] = useState('Destination name');\n  const [toast, setToast] = useState('');\n  const toastTimeout = useRef();\n  const [alreadyVisited, setAlreadyVisited] = useState(false);\n  const [userDestinations, setUserDestinations] = useState([]);\n  useEffect(() => {\n    async function fetchAll() {\n      setLoading(true);\n      try {\n        const [dRes, vRes, uRes] = await Promise.all([API.get('/api/destinations', {\n          headers: getAuthHeader()\n        }), API.get('/api/user/visited-destinations', {\n          headers: getAuthHeader()\n        }), API.get('/api/user/destinations', {\n          headers: getAuthHeader()\n        })]);\n        setDestinations(dRes.data);\n        setVisited(vRes.data.visitedDestinations || []);\n        setUserDestinations(uRes.data.userDestinations || []);\n      } catch (err) {\n        setDestinations([]);\n        setVisited([]);\n        setUserDestinations([]);\n      } finally {\n        setLoading(false);\n      }\n    }\n    fetchAll();\n  }, []);\n  const isVisited = (state, dest) => visited.some(v => v.state === state && v.destination === dest);\n  const handleToggleVisited = async (state, dest) => {\n    try {\n      await API.post('/api/user/visited-destinations', {\n        state,\n        destination: dest\n      }, {\n        headers: getAuthHeader()\n      });\n      setVisited(prev => isVisited(state, dest) ? prev.filter(v => !(v.state === state && v.destination === dest)) : [...prev, {\n        state,\n        destination: dest\n      }]);\n    } catch (err) {\n      alert('Failed to update visited status');\n    }\n  };\n\n  // Merge global and user-specific destinations for display\n  const mergedDestinations = React.useMemo(() => {\n    // Map global by state for easy lookup\n    const globalMap = new Map(destinations.map(d => [d.state, d]));\n    // Group user destinations by state\n    const userMap = {};\n    userDestinations.forEach(({\n      state,\n      destination\n    }) => {\n      if (!userMap[state]) userMap[state] = [];\n      userMap[state].push(destination);\n    });\n    // For each global state, add user destinations if any\n    const result = destinations.map(d => {\n      const userDests = userMap[d.state] || [];\n      return {\n        ...d,\n        destinations: [...d.destinations, ...userDests.filter(ud => !d.destinations.includes(ud))]\n      };\n    });\n    // Add any user-only states (if user added a destination for a state not in global)\n    Object.keys(userMap).forEach(state => {\n      if (!globalMap.has(state)) {\n        result.push({\n          state,\n          type: 'User',\n          destinations: userMap[state],\n          topDestinations: [],\n          _id: 'user-' + state.replace(/\\s/g, '-')\n        });\n      }\n    });\n    return result;\n  }, [destinations, userDestinations]);\n\n  // Filtering\n  const filteredDestinations = mergedDestinations.filter(dest => {\n    const matchesSearch = dest.state.toLowerCase().includes(searchTerm.toLowerCase()) || dest.destinations.some(d => d.toLowerCase().includes(searchTerm.toLowerCase()));\n    const matchesFilter = filter === 'all' || filter === 'visited' && dest.destinations.some(d => isVisited(dest.state, d)) || filter === 'unvisited' && !dest.destinations.some(d => isVisited(dest.state, d));\n    return matchesSearch && matchesFilter;\n  });\n  const getProgress = () => {\n    const total = destinations.reduce((acc, d) => acc + d.destinations.length, 0);\n    const visitedCount = visited.length;\n    return total ? Math.round(visitedCount / total * 100) : 0;\n  };\n  const getVisitedStatesCount = () => {\n    // Count unique states/UTs with at least one visited destination\n    const visitedStates = new Set(visited.map(v => v.state));\n    return visitedStates.size;\n  };\n  const getTotalStatesCount = () => destinations.length;\n\n  // Expand/collapse logic\n  const toggleExpand = id => setExpanded(prev => ({\n    ...prev,\n    [id]: !prev[id]\n  }));\n\n  // Add/Edit/Delete destination\n  const handleAddDestination = async (stateId, newDest, stateName) => {\n    try {\n      // Only add to user-specific destinations\n      await API.post('/api/user/destination', {\n        state: stateName,\n        destination: newDest\n      }, {\n        headers: getAuthHeader()\n      });\n      setUserDestinations(prev => [...prev, {\n        state: stateName,\n        destination: newDest\n      }]);\n      setModal({\n        open: false\n      });\n    } catch {\n      alert('Failed to add destination');\n    }\n  };\n  const handleEditDestination = async (stateId, oldName, newName, stateName) => {\n    try {\n      await API.put(`/api/destinations/${stateId}/destination`, {\n        oldName,\n        newName\n      }, {\n        headers: getAuthHeader()\n      });\n      setDestinations(ds => ds.map(d => d._id === stateId ? {\n        ...d,\n        destinations: d.destinations.map(n => n === oldName ? newName : n),\n        topDestinations: d.topDestinations.map(n => n === oldName ? newName : n)\n      } : d));\n      setModal({\n        open: false\n      });\n    } catch {\n      alert('Failed to edit destination');\n    }\n  };\n  const handleDeleteDestination = async (stateId, name, stateName) => {\n    setConfirm({\n      open: true,\n      stateId,\n      name,\n      stateName\n    });\n  };\n  const confirmDelete = async () => {\n    const {\n      stateId,\n      name,\n      stateName\n    } = confirm;\n    // Check if this is a user-specific destination\n    const isUserDest = userDestinations.some(d => d.state === stateName && d.destination === name);\n    try {\n      if (isUserDest) {\n        // Delete from user-specific destinations\n        await API.delete(`/api/user/destination?state=${encodeURIComponent(stateName)}&destination=${encodeURIComponent(name)}`, {\n          headers: getAuthHeader()\n        });\n        setUserDestinations(prev => prev.filter(d => !(d.state === stateName && d.destination === name)));\n      } else {\n        // Delete from global destinations\n        await API.delete(`/api/destinations/${stateId}/destination?name=${encodeURIComponent(name)}`, {\n          headers: getAuthHeader()\n        });\n        setDestinations(ds => ds.map(d => d._id === stateId ? {\n          ...d,\n          destinations: d.destinations.filter(n => n !== name),\n          topDestinations: d.topDestinations.filter(n => n !== name)\n        } : d));\n      }\n      setConfirm({\n        open: false\n      });\n      setToast('Destination deleted successfully!');\n      clearTimeout(toastTimeout.current);\n      toastTimeout.current = setTimeout(() => setToast(''), 2500);\n    } catch {\n      setToast('Failed to delete destination');\n      clearTimeout(toastTimeout.current);\n      toastTimeout.current = setTimeout(() => setToast(''), 2500);\n    }\n  };\n\n  // Add/Edit/Delete destination\n  const handleGlobalAdd = async () => {\n    if (!selectedStateId || !newDestName.trim()) return;\n    const stateObj = destinations.find(d => d._id === selectedStateId);\n    const stateName = stateObj ? stateObj.state : '';\n    try {\n      // Only add to user-specific destinations\n      await API.post('/api/user/destination', {\n        state: stateName,\n        destination: newDestName.trim()\n      }, {\n        headers: getAuthHeader()\n      });\n      setUserDestinations(prev => [...prev, {\n        state: stateName,\n        destination: newDestName.trim()\n      }]);\n      if (alreadyVisited) {\n        await API.post('/api/user/visited-destinations', {\n          state: stateName,\n          destination: newDestName.trim()\n        }, {\n          headers: getAuthHeader()\n        });\n        setVisited(prev => [...prev, {\n          state: stateName,\n          destination: newDestName.trim()\n        }]);\n      }\n      setGlobalAddModal(false);\n      setSelectedStateId('');\n      setNewDestName('');\n      setAlreadyVisited(false);\n      setToast('Destination Added Successfully');\n      clearTimeout(toastTimeout.current);\n      toastTimeout.current = setTimeout(() => setToast(''), 2500);\n    } catch {\n      setToast('Failed to add destination');\n      clearTimeout(toastTimeout.current);\n      toastTimeout.current = setTimeout(() => setToast(''), 2500);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"travel-journal\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"journal-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Travel Journal\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"progress-bar\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"progress-fill\",\n              style: {\n                width: `${getProgress()}%`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"progress-details\",\n            style: {\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n              marginTop: 4,\n              fontSize: '1.01em',\n              color: '#4f8cff',\n              fontWeight: 600\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: [visited.length, \" / \", destinations.reduce((acc, d) => acc + d.destinations.length, 0), \" (\", getProgress(), \"%)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: '#7a8ca3',\n                fontWeight: 500\n              },\n              children: [visited.length, \" destinations visited across \", getVisitedStatesCount(), \" State/UT\", getVisitedStatesCount() !== 1 ? 's' : '']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 9\n      }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: 'center',\n          margin: '2rem',\n          color: '#888'\n        },\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"destinations-grid\",\n        children: filteredDestinations.map(dest => {\n          const visitedTop = dest.topDestinations.filter(place => isVisited(dest.state, place)).length;\n          const visitedAll = dest.destinations.filter(place => isVisited(dest.state, place)).length;\n          const isOpen = expanded[dest._id];\n          const allVisited = dest.destinations.length > 0 && visitedAll === dest.destinations.length;\n          const partiallyVisited = visitedAll > 0 && !allVisited;\n          const showFlag = visitedAll > 0;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `destination-card${isOpen ? ' expanded' : ''}${allVisited ? ' all-visited' : ''}${partiallyVisited ? ' partially-visited' : ''}`,\n            onClick: () => toggleExpand(dest._id),\n            style: {\n              cursor: 'pointer',\n              position: 'relative'\n            },\n            children: [showFlag && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"visited-flag-icon\",\n              title: \"Visited at least one destination\",\n              children: /*#__PURE__*/_jsxDEV(FiFlag, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 309,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-header\",\n              style: {\n                flexDirection: 'column',\n                alignItems: 'center',\n                textAlign: 'center',\n                gap: 4,\n                position: 'relative'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"state-title\",\n                style: {\n                  fontWeight: 700,\n                  fontSize: '1.13em',\n                  color: '#1a2636',\n                  marginBottom: 2\n                },\n                children: dest.state\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"state-type\",\n                style: {\n                  fontSize: '0.93em',\n                  color: '#7a8ca3',\n                  marginBottom: 6\n                },\n                children: dest.type === 'UT' ? 'Union Territory' : 'State'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 314,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-insights\",\n                style: {\n                  display: 'flex',\n                  gap: 18,\n                  justifyContent: 'center',\n                  alignItems: 'center',\n                  margin: '0.2em 0 0.1em 0'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  title: \"Top 3 visited\",\n                  style: {\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: 4,\n                    color: '#f7b731',\n                    fontWeight: 600\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(FiStar, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 316,\n                    columnNumber: 133\n                  }, this), \" \", visitedTop, \" / \", dest.topDestinations.length]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 316,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  title: \"All visited\",\n                  style: {\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: 4,\n                    color: '#2ecc71',\n                    fontWeight: 600\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(FiCheckCircle, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 317,\n                    columnNumber: 131\n                  }, this), \" \", visitedAll, \" / \", dest.destinations.length]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 317,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  title: \"Total destinations\",\n                  style: {\n                    color: '#4f8cff',\n                    fontWeight: 500\n                  },\n                  children: [\"Total: \", dest.destinations.length]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 318,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 315,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 19\n            }, this), isOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"destinations-list\",\n              children: dest.destinations.map(place => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `destination-item ${dest.topDestinations.includes(place) ? 'top-destination' : ''} ${isVisited(dest.state, place) ? 'visited' : ''}`,\n                style: {\n                  background: isVisited(dest.state, place) ? '#e6ffe6' : '#fffbe6',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'space-between',\n                  padding: '0.7em 1em',\n                  margin: '0.3em 0',\n                  borderRadius: 8\n                },\n                onClick: e => {\n                  e.stopPropagation();\n                  handleToggleVisited(dest.state, place);\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"destination-name\",\n                  style: {\n                    fontWeight: 500\n                  },\n                  children: place\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 330,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: 10\n                  },\n                  children: [dest.topDestinations.includes(place) && /*#__PURE__*/_jsxDEV(FiStar, {\n                    className: \"top-badge\",\n                    style: {\n                      color: '#f7b731'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 333,\n                    columnNumber: 31\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"visit-status\",\n                    style: {\n                      color: isVisited(dest.state, place) ? '#2ecc71' : '#bbb',\n                      fontSize: '1.2em'\n                    },\n                    children: isVisited(dest.state, place) ? /*#__PURE__*/_jsxDEV(FiCheckCircle, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 336,\n                      columnNumber: 63\n                    }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        fontSize: '1.1em'\n                      },\n                      children: \"\\u25CB\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 336,\n                      columnNumber: 83\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 335,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"tj-dest-actions\",\n                    style: {\n                      display: 'flex',\n                      gap: 8\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(FiEdit2, {\n                      className: \"tj-dest-edit\",\n                      title: \"Edit\",\n                      onClick: e => {\n                        e.stopPropagation();\n                        setModal({\n                          open: true,\n                          stateId: dest._id,\n                          type: 'edit',\n                          oldName: place,\n                          stateName: dest.state\n                        });\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 339,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(FiTrash2, {\n                      className: \"tj-dest-delete\",\n                      title: \"Delete\",\n                      onClick: e => {\n                        e.stopPropagation();\n                        handleDeleteDestination(dest._id, place, dest.state);\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 344,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 338,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 331,\n                  columnNumber: 27\n                }, this)]\n              }, place, true, {\n                fileName: _jsxFileName,\n                lineNumber: 324,\n                columnNumber: 25\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 21\n            }, this)]\n          }, dest._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"floating-add-btn\",\n        title: \"Add Destination\",\n        onClick: () => setGlobalAddModal(true),\n        children: /*#__PURE__*/_jsxDEV(FiPlus, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 9\n      }, this), globalAddModal && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tj-modal-backdrop\",\n        onClick: () => setGlobalAddModal(false),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"tj-modal tj-modal-cool\",\n          onClick: e => e.stopPropagation(),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              flexDirection: 'column',\n              alignItems: 'center',\n              gap: 8\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              style: {\n                textAlign: 'center',\n                marginBottom: 0,\n                fontWeight: 800,\n                letterSpacing: '-1px'\n              },\n              children: \"Add Destination\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                color: '#7a8ca3',\n                fontSize: '1.01em',\n                marginBottom: 8\n              },\n              children: \"Add a new destination to any State or Union Territory\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"tj-modal-input tj-modal-select\",\n            value: selectedStateId,\n            onChange: e => setSelectedStateId(e.target.value),\n            style: {\n              marginBottom: 10,\n              marginTop: 8\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Select State/UT\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 17\n            }, this), destinations.map(d => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: d._id,\n              children: [d.state, \" (\", d.type === 'UT' ? 'UT' : 'State', \")\"]\n            }, d._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 19\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              height: 1,\n              background: '#e3eafc',\n              width: '100%',\n              margin: '8px 0'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"tj-modal-input\",\n            placeholder: destPlaceholder,\n            value: newDestName,\n            onChange: e => setNewDestName(e.target.value),\n            onFocus: () => setDestPlaceholder(''),\n            onBlur: () => !newDestName && setDestPlaceholder('Destination name'),\n            autoFocus: true,\n            style: {\n              marginBottom: 8\n            },\n            disabled: !selectedStateId\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"tj-switch-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"tj-switch\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"checkbox\",\n                id: \"alreadyVisited\",\n                checked: alreadyVisited,\n                onChange: e => setAlreadyVisited(e.target.checked)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 397,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"tj-slider\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 398,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"alreadyVisited\",\n              className: \"tj-switch-label\",\n              children: \"Already Visited?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 400,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"tj-modal-actions\",\n            style: {\n              display: 'flex',\n              justifyContent: 'center',\n              gap: 12,\n              marginTop: 10\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setGlobalAddModal(false),\n              className: \"tj-btn tj-btn-cancel\",\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleGlobalAdd,\n              className: \"tj-btn tj-btn-save\",\n              disabled: !selectedStateId || !newDestName.trim(),\n              children: \"Add\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 11\n      }, this), toast && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tj-toast\",\n        children: toast\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(AddEditModal, {\n        open: modal.open,\n        title: modal.type === 'add' ? 'Add Destination' : 'Edit Destination',\n        initialValue: modal.type === 'edit' ? modal.oldName : '',\n        stateName: modal.stateName,\n        onClose: () => setModal({\n          open: false\n        }),\n        onSave: val => {\n          if (modal.type === 'add') handleAddDestination(modal.stateId, val, modal.stateName);else if (modal.type === 'edit') handleEditDestination(modal.stateId, modal.oldName, val, modal.stateName);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ConfirmModal, {\n        open: confirm.open,\n        stateName: confirm.stateName,\n        destination: confirm.name,\n        onClose: () => setConfirm({\n          open: false\n        }),\n        onConfirm: confirmDelete\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 274,\n    columnNumber: 5\n  }, this);\n};\n_s2(TravelJournal, \"Pd9skFQBYTwNiWNH3HtRX11jVp0=\");\n_c3 = TravelJournal;\nexport default TravelJournal;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"AddEditModal\");\n$RefreshReg$(_c2, \"ConfirmModal\");\n$RefreshReg$(_c3, \"TravelJournal\");","map":{"version":3,"names":["React","useState","useEffect","useRef","API","Layout","FiPlus","FiEdit2","FiTrash2","FiStar","FiCheckCircle","FiFlag","jsxDEV","_jsxDEV","getAuthHeader","token","localStorage","getItem","Authorization","AddEditModal","open","onClose","onSave","initialValue","title","stateName","_s","value","setValue","className","onClick","children","e","stopPropagation","style","textAlign","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","fontWeight","fontSize","color","onChange","target","autoFocus","display","justifyContent","gap","marginTop","trim","_c","ConfirmModal","onConfirm","destination","_c2","TravelJournal","_s2","destinations","setDestinations","visited","setVisited","expanded","setExpanded","searchTerm","setSearchTerm","filter","setFilter","modal","setModal","confirm","setConfirm","loading","setLoading","globalAddModal","setGlobalAddModal","selectedStateId","setSelectedStateId","newDestName","setNewDestName","destPlaceholder","setDestPlaceholder","toast","setToast","toastTimeout","alreadyVisited","setAlreadyVisited","userDestinations","setUserDestinations","fetchAll","dRes","vRes","uRes","Promise","all","get","headers","data","visitedDestinations","err","isVisited","state","dest","some","v","handleToggleVisited","post","prev","alert","mergedDestinations","useMemo","globalMap","Map","map","d","userMap","forEach","push","result","userDests","ud","includes","Object","keys","has","type","topDestinations","_id","replace","filteredDestinations","matchesSearch","toLowerCase","matchesFilter","getProgress","total","reduce","acc","length","visitedCount","Math","round","getVisitedStatesCount","visitedStates","Set","size","getTotalStatesCount","toggleExpand","id","handleAddDestination","stateId","newDest","handleEditDestination","oldName","newName","put","ds","n","handleDeleteDestination","name","confirmDelete","isUserDest","delete","encodeURIComponent","clearTimeout","current","setTimeout","handleGlobalAdd","stateObj","find","width","alignItems","margin","visitedTop","place","visitedAll","isOpen","allVisited","partiallyVisited","showFlag","cursor","position","flexDirection","background","padding","borderRadius","letterSpacing","height","placeholder","onFocus","onBlur","disabled","checked","htmlFor","val","_c3","$RefreshReg$"],"sources":["/Users/omprakashutaha/Desktop/Map2/src/components/TravelJournal.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport API from '../api/api';\nimport Layout from './Layout';\nimport './TravelJournal.css';\nimport { FiPlus, FiEdit2, FiTrash2, FiStar, FiCheckCircle, FiFlag } from 'react-icons/fi';\n\nfunction getAuthHeader() {\n  const token = localStorage.getItem('token');\n  return token ? { Authorization: token } : {};\n}\n\nconst AddEditModal = ({ open, onClose, onSave, initialValue, title, stateName }) => {\n  const [value, setValue] = useState(initialValue || '');\n  useEffect(() => { setValue(initialValue || ''); }, [initialValue]);\n  if (!open) return null;\n  return (\n    <div className=\"tj-modal-backdrop\" onClick={onClose}>\n      <div className=\"tj-modal\" onClick={e => e.stopPropagation()}>\n        <h3 style={{textAlign:'center',marginBottom:8}}>{title}</h3>\n        <div className=\"modal-state-name\" style={{textAlign:'center',fontWeight:600,marginBottom:10,fontSize:'1.1em',color:'#4f8cff'}}>{stateName}</div>\n        <input\n          className=\"tj-modal-input\"\n          value={value}\n          onChange={e => setValue(e.target.value)}\n          autoFocus\n        />\n        <div className=\"tj-modal-actions\" style={{display:'flex',justifyContent:'center',gap:12,marginTop:10}}>\n          <button onClick={onClose} className=\"tj-btn tj-btn-cancel\">Cancel</button>\n          <button onClick={() => { if (value.trim()) onSave(value.trim()); }} className=\"tj-btn tj-btn-save\">Save</button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst ConfirmModal = ({ open, onClose, onConfirm, stateName, destination }) => {\n  if (!open) return null;\n  return (\n    <div className=\"tj-modal-backdrop\" onClick={onClose}>\n      <div className=\"tj-modal\" onClick={e => e.stopPropagation()}>\n        <h3 style={{textAlign:'center',marginBottom:8}}>Delete Destination</h3>\n        <div className=\"modal-state-name\" style={{textAlign:'center',fontWeight:600,marginBottom:10,fontSize:'1.1em',color:'#4f8cff'}}>{stateName}</div>\n        <div className=\"modal-message\" style={{textAlign:'center',marginBottom:16}}>\n          Are you sure you want to delete <b>{destination}</b> from <b>{stateName}</b>?\n        </div>\n        <div className=\"tj-modal-actions\" style={{display:'flex',justifyContent:'center',gap:12}}>\n          <button onClick={onClose} className=\"tj-btn tj-btn-cancel\">Cancel</button>\n          <button onClick={onConfirm} className=\"tj-btn tj-btn-delete\">Delete</button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst TravelJournal = () => {\n  const [destinations, setDestinations] = useState([]);\n  const [visited, setVisited] = useState([]); // [{state, destination}]\n  const [expanded, setExpanded] = useState({}); // { [stateId]: true/false }\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filter, setFilter] = useState('all');\n  const [modal, setModal] = useState({ open: false });\n  const [confirm, setConfirm] = useState({ open: false });\n  const [loading, setLoading] = useState(true);\n  const [globalAddModal, setGlobalAddModal] = useState(false);\n  const [selectedStateId, setSelectedStateId] = useState('');\n  const [newDestName, setNewDestName] = useState('');\n  const [destPlaceholder, setDestPlaceholder] = useState('Destination name');\n  const [toast, setToast] = useState('');\n  const toastTimeout = useRef();\n  const [alreadyVisited, setAlreadyVisited] = useState(false);\n  const [userDestinations, setUserDestinations] = useState([]);\n\n  useEffect(() => {\n    async function fetchAll() {\n      setLoading(true);\n      try {\n        const [dRes, vRes, uRes] = await Promise.all([\n          API.get('/api/destinations', { headers: getAuthHeader() }),\n          API.get('/api/user/visited-destinations', { headers: getAuthHeader() }),\n          API.get('/api/user/destinations', { headers: getAuthHeader() })\n        ]);\n        setDestinations(dRes.data);\n        setVisited(vRes.data.visitedDestinations || []);\n        setUserDestinations(uRes.data.userDestinations || []);\n      } catch (err) {\n        setDestinations([]);\n        setVisited([]);\n        setUserDestinations([]);\n      } finally {\n        setLoading(false);\n      }\n    }\n    fetchAll();\n  }, []);\n\n  const isVisited = (state, dest) => visited.some(v => v.state === state && v.destination === dest);\n\n  const handleToggleVisited = async (state, dest) => {\n    try {\n      await API.post('/api/user/visited-destinations', { state, destination: dest }, { headers: getAuthHeader() });\n      setVisited(prev =>\n        isVisited(state, dest)\n          ? prev.filter(v => !(v.state === state && v.destination === dest))\n          : [...prev, { state, destination: dest }]\n      );\n    } catch (err) {\n      alert('Failed to update visited status');\n    }\n  };\n\n  // Merge global and user-specific destinations for display\n  const mergedDestinations = React.useMemo(() => {\n    // Map global by state for easy lookup\n    const globalMap = new Map(destinations.map(d => [d.state, d]));\n    // Group user destinations by state\n    const userMap = {};\n    userDestinations.forEach(({ state, destination }) => {\n      if (!userMap[state]) userMap[state] = [];\n      userMap[state].push(destination);\n    });\n    // For each global state, add user destinations if any\n    const result = destinations.map(d => {\n      const userDests = userMap[d.state] || [];\n      return {\n        ...d,\n        destinations: [...d.destinations, ...userDests.filter(ud => !d.destinations.includes(ud))],\n      };\n    });\n    // Add any user-only states (if user added a destination for a state not in global)\n    Object.keys(userMap).forEach(state => {\n      if (!globalMap.has(state)) {\n        result.push({\n          state,\n          type: 'User',\n          destinations: userMap[state],\n          topDestinations: [],\n          _id: 'user-' + state.replace(/\\s/g, '-')\n        });\n      }\n    });\n    return result;\n  }, [destinations, userDestinations]);\n\n  // Filtering\n  const filteredDestinations = mergedDestinations.filter(dest => {\n    const matchesSearch = dest.state.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      dest.destinations.some(d => d.toLowerCase().includes(searchTerm.toLowerCase()));\n    const matchesFilter = filter === 'all' ||\n      (filter === 'visited' && dest.destinations.some(d => isVisited(dest.state, d))) ||\n      (filter === 'unvisited' && !dest.destinations.some(d => isVisited(dest.state, d)));\n    return matchesSearch && matchesFilter;\n  });\n\n  const getProgress = () => {\n    const total = destinations.reduce((acc, d) => acc + d.destinations.length, 0);\n    const visitedCount = visited.length;\n    return total ? Math.round((visitedCount / total) * 100) : 0;\n  };\n\n  const getVisitedStatesCount = () => {\n    // Count unique states/UTs with at least one visited destination\n    const visitedStates = new Set(visited.map(v => v.state));\n    return visitedStates.size;\n  };\n  const getTotalStatesCount = () => destinations.length;\n\n  // Expand/collapse logic\n  const toggleExpand = (id) => setExpanded(prev => ({ ...prev, [id]: !prev[id] }));\n\n  // Add/Edit/Delete destination\n  const handleAddDestination = async (stateId, newDest, stateName) => {\n    try {\n      // Only add to user-specific destinations\n      await API.post('/api/user/destination', { state: stateName, destination: newDest }, { headers: getAuthHeader() });\n      setUserDestinations(prev => [...prev, { state: stateName, destination: newDest }]);\n      setModal({ open: false });\n    } catch {\n      alert('Failed to add destination');\n    }\n  };\n  const handleEditDestination = async (stateId, oldName, newName, stateName) => {\n    try {\n      await API.put(`/api/destinations/${stateId}/destination`, { oldName, newName }, { headers: getAuthHeader() });\n      setDestinations(ds => ds.map(d =>\n        d._id === stateId\n          ? {\n              ...d,\n              destinations: d.destinations.map(n => n === oldName ? newName : n),\n              topDestinations: d.topDestinations.map(n => n === oldName ? newName : n)\n            }\n          : d\n      ));\n      setModal({ open: false });\n    } catch {\n      alert('Failed to edit destination');\n    }\n  };\n  const handleDeleteDestination = async (stateId, name, stateName) => {\n    setConfirm({ open: true, stateId, name, stateName });\n  };\n  const confirmDelete = async () => {\n    const { stateId, name, stateName } = confirm;\n    // Check if this is a user-specific destination\n    const isUserDest = userDestinations.some(\n      d => d.state === stateName && d.destination === name\n    );\n    try {\n      if (isUserDest) {\n        // Delete from user-specific destinations\n        await API.delete(\n          `/api/user/destination?state=${encodeURIComponent(stateName)}&destination=${encodeURIComponent(name)}`,\n          { headers: getAuthHeader() }\n        );\n        setUserDestinations(prev =>\n          prev.filter(d => !(d.state === stateName && d.destination === name))\n        );\n      } else {\n        // Delete from global destinations\n        await API.delete(\n          `/api/destinations/${stateId}/destination?name=${encodeURIComponent(name)}`,\n          { headers: getAuthHeader() }\n        );\n        setDestinations(ds =>\n          ds.map(d =>\n            d._id === stateId\n              ? {\n                  ...d,\n                  destinations: d.destinations.filter(n => n !== name),\n                  topDestinations: d.topDestinations.filter(n => n !== name)\n                }\n              : d\n          )\n        );\n      }\n      setConfirm({ open: false });\n      setToast('Destination deleted successfully!');\n      clearTimeout(toastTimeout.current);\n      toastTimeout.current = setTimeout(() => setToast(''), 2500);\n    } catch {\n      setToast('Failed to delete destination');\n      clearTimeout(toastTimeout.current);\n      toastTimeout.current = setTimeout(() => setToast(''), 2500);\n    }\n  };\n\n  // Add/Edit/Delete destination\n  const handleGlobalAdd = async () => {\n    if (!selectedStateId || !newDestName.trim()) return;\n    const stateObj = destinations.find(d => d._id === selectedStateId);\n    const stateName = stateObj ? stateObj.state : '';\n    try {\n      // Only add to user-specific destinations\n      await API.post('/api/user/destination', { state: stateName, destination: newDestName.trim() }, { headers: getAuthHeader() });\n      setUserDestinations(prev => [...prev, { state: stateName, destination: newDestName.trim() }]);\n      if (alreadyVisited) {\n        await API.post('/api/user/visited-destinations', { state: stateName, destination: newDestName.trim() }, { headers: getAuthHeader() });\n        setVisited(prev => [...prev, { state: stateName, destination: newDestName.trim() }]);\n      }\n      setGlobalAddModal(false);\n      setSelectedStateId('');\n      setNewDestName('');\n      setAlreadyVisited(false);\n      setToast('Destination Added Successfully');\n      clearTimeout(toastTimeout.current);\n      toastTimeout.current = setTimeout(() => setToast(''), 2500);\n    } catch {\n      setToast('Failed to add destination');\n      clearTimeout(toastTimeout.current);\n      toastTimeout.current = setTimeout(() => setToast(''), 2500);\n    }\n  };\n\n  return (\n    <Layout>\n      <div className=\"travel-journal\">\n        <div className=\"journal-header\">\n          <h1>Travel Journal</h1>\n          <div className=\"progress-container\">\n            <div className=\"progress-bar\">\n              <div className=\"progress-fill\" style={{ width: `${getProgress()}%` }} />\n            </div>\n            <div className=\"progress-details\" style={{display:'flex',justifyContent:'space-between',alignItems:'center',marginTop:4,fontSize:'1.01em',color:'#4f8cff',fontWeight:600}}>\n              <span>{visited.length} / {destinations.reduce((acc, d) => acc + d.destinations.length, 0)} ({getProgress()}%)</span>\n              <span style={{color:'#7a8ca3',fontWeight:500}}>{visited.length} destinations visited across {getVisitedStatesCount()} State/UT{getVisitedStatesCount()!==1?'s':''}</span>\n            </div>\n          </div>\n        </div>\n        {/* Cards grid */}\n        {loading ? (\n          <div style={{ textAlign: 'center', margin: '2rem', color: '#888' }}>Loading...</div>\n        ) : (\n          <div className=\"destinations-grid\">\n            {filteredDestinations.map((dest) => {\n              const visitedTop = dest.topDestinations.filter(place => isVisited(dest.state, place)).length;\n              const visitedAll = dest.destinations.filter(place => isVisited(dest.state, place)).length;\n              const isOpen = expanded[dest._id];\n              const allVisited = dest.destinations.length > 0 && visitedAll === dest.destinations.length;\n              const partiallyVisited = visitedAll > 0 && !allVisited;\n              const showFlag = visitedAll > 0;\n              return (\n                <div\n                  key={dest._id}\n                  className={`destination-card${isOpen ? ' expanded' : ''}${allVisited ? ' all-visited' : ''}${partiallyVisited ? ' partially-visited' : ''}`}\n                  onClick={() => toggleExpand(dest._id)}\n                  style={{ cursor: 'pointer', position: 'relative' }}\n                >\n                  {showFlag && (\n                    <span className=\"visited-flag-icon\" title=\"Visited at least one destination\">\n                      <FiFlag />\n                    </span>\n                  )}\n                  <div className=\"card-header\" style={{flexDirection:'column',alignItems:'center',textAlign:'center',gap:4, position:'relative'}}>\n                    <div className=\"state-title\" style={{fontWeight:700,fontSize:'1.13em',color:'#1a2636',marginBottom:2}}>{dest.state}</div>\n                    <div className=\"state-type\" style={{fontSize:'0.93em',color:'#7a8ca3',marginBottom:6}}>{dest.type === 'UT' ? 'Union Territory' : 'State'}</div>\n                    <div className=\"card-insights\" style={{display:'flex',gap:18,justifyContent:'center',alignItems:'center',margin:'0.2em 0 0.1em 0'}}>\n                      <span title=\"Top 3 visited\" style={{display:'flex',alignItems:'center',gap:4,color:'#f7b731',fontWeight:600}}><FiStar /> {visitedTop} / {dest.topDestinations.length}</span>\n                      <span title=\"All visited\" style={{display:'flex',alignItems:'center',gap:4,color:'#2ecc71',fontWeight:600}}><FiCheckCircle /> {visitedAll} / {dest.destinations.length}</span>\n                      <span title=\"Total destinations\" style={{color:'#4f8cff',fontWeight:500}}>Total: {dest.destinations.length}</span>\n                    </div>\n                  </div>\n                  {isOpen && (\n                    <div className=\"destinations-list\">\n                      {dest.destinations.map((place) => (\n                        <div\n                          key={place}\n                          className={`destination-item ${dest.topDestinations.includes(place) ? 'top-destination' : ''} ${isVisited(dest.state, place) ? 'visited' : ''}`}\n                          style={{ background: isVisited(dest.state, place) ? '#e6ffe6' : '#fffbe6', display:'flex',alignItems:'center',justifyContent:'space-between',padding:'0.7em 1em',margin:'0.3em 0',borderRadius:8 }}\n                          onClick={e => { e.stopPropagation(); handleToggleVisited(dest.state, place); }}\n                        >\n                          <span className=\"destination-name\" style={{fontWeight:500}}>{place}</span>\n                          <div style={{display:'flex',alignItems:'center',gap:10}}>\n                            {dest.topDestinations.includes(place) && (\n                              <FiStar className=\"top-badge\" style={{color:'#f7b731'}} />\n                            )}\n                            <span className=\"visit-status\" style={{color:isVisited(dest.state, place)?'#2ecc71':'#bbb',fontSize:'1.2em'}}>\n                              {isVisited(dest.state, place) ? <FiCheckCircle /> : <span style={{fontSize:'1.1em'}}>○</span>}\n                            </span>\n                            <span className=\"tj-dest-actions\" style={{display:'flex',gap:8}}>\n                              <FiEdit2\n                                className=\"tj-dest-edit\"\n                                title=\"Edit\"\n                                onClick={e => { e.stopPropagation(); setModal({ open: true, stateId: dest._id, type: 'edit', oldName: place, stateName: dest.state }); }}\n                              />\n                              <FiTrash2\n                                className=\"tj-dest-delete\"\n                                title=\"Delete\"\n                                onClick={e => { e.stopPropagation(); handleDeleteDestination(dest._id, place, dest.state); }}\n                              />\n                            </span>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n        )}\n        {/* Global Add Destination Floating Button */}\n        <button className=\"floating-add-btn\" title=\"Add Destination\" onClick={() => setGlobalAddModal(true)}>\n          <FiPlus />\n        </button>\n        {/* Global Add Modal */}\n        {globalAddModal && (\n          <div className=\"tj-modal-backdrop\" onClick={() => setGlobalAddModal(false)}>\n            <div className=\"tj-modal tj-modal-cool\" onClick={e => e.stopPropagation()}>\n              <div style={{display:'flex',flexDirection:'column',alignItems:'center',gap:8}}>\n                <h3 style={{textAlign:'center',marginBottom:0,fontWeight:800,letterSpacing:'-1px'}}>Add Destination</h3>\n                <div style={{color:'#7a8ca3',fontSize:'1.01em',marginBottom:8}}>Add a new destination to any State or Union Territory</div>\n              </div>\n              <select\n                className=\"tj-modal-input tj-modal-select\"\n                value={selectedStateId}\n                onChange={e => setSelectedStateId(e.target.value)}\n                style={{marginBottom:10,marginTop:8}}\n              >\n                <option value=\"\">Select State/UT</option>\n                {destinations.map(d => (\n                  <option key={d._id} value={d._id}>{d.state} ({d.type === 'UT' ? 'UT' : 'State'})</option>\n                ))}\n              </select>\n              <div style={{height:1,background:'#e3eafc',width:'100%',margin:'8px 0'}} />\n              <input\n                className=\"tj-modal-input\"\n                placeholder={destPlaceholder}\n                value={newDestName}\n                onChange={e => setNewDestName(e.target.value)}\n                onFocus={() => setDestPlaceholder('')}\n                onBlur={() => !newDestName && setDestPlaceholder('Destination name')}\n                autoFocus\n                style={{marginBottom:8}}\n                disabled={!selectedStateId}\n              />\n              <div className=\"tj-switch-container\">\n                <label className=\"tj-switch\">\n                  <input type=\"checkbox\" id=\"alreadyVisited\" checked={alreadyVisited} onChange={e => setAlreadyVisited(e.target.checked)} />\n                  <span className=\"tj-slider\"></span>\n                </label>\n                <label htmlFor=\"alreadyVisited\" className=\"tj-switch-label\">Already Visited?</label>\n              </div>\n              <div className=\"tj-modal-actions\" style={{display:'flex',justifyContent:'center',gap:12,marginTop:10}}>\n                <button onClick={() => setGlobalAddModal(false)} className=\"tj-btn tj-btn-cancel\">Cancel</button>\n                <button onClick={handleGlobalAdd} className=\"tj-btn tj-btn-save\" disabled={!selectedStateId || !newDestName.trim()}>Add</button>\n              </div>\n            </div>\n          </div>\n        )}\n        {/* Toast Message */}\n        {toast && <div className=\"tj-toast\">{toast}</div>}\n        {/* Add/Edit Modal (for per-state edit) */}\n        <AddEditModal\n          open={modal.open}\n          title={modal.type === 'add' ? 'Add Destination' : 'Edit Destination'}\n          initialValue={modal.type === 'edit' ? modal.oldName : ''}\n          stateName={modal.stateName}\n          onClose={() => setModal({ open: false })}\n          onSave={val => {\n            if (modal.type === 'add') handleAddDestination(modal.stateId, val, modal.stateName);\n            else if (modal.type === 'edit') handleEditDestination(modal.stateId, modal.oldName, val, modal.stateName);\n          }}\n        />\n        {/* Confirm Delete Modal */}\n        <ConfirmModal\n          open={confirm.open}\n          stateName={confirm.stateName}\n          destination={confirm.name}\n          onClose={() => setConfirm({ open: false })}\n          onConfirm={confirmDelete}\n        />\n      </div>\n    </Layout>\n  );\n};\n\nexport default TravelJournal; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}